!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/Bot-Apocalypse/",t(t.s=3)}([function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,r){n(this,e),this.x=t,this.y=i,this.range=0,this.direction=0,this.minDamage=10,this.MaxDamage=20,this.RATE=0,this.rateOfFire=0,this.reloading=!1,this.targets=[],this.name="",this.size=20,this.type="",this.effect=null,this.value=15,this.selected=!1,this.upgrades=[!1,!1,!1,!1]}return r(e,[{key:"track",value:function(){var e=this.x-this.targets[0].x,t=this.y-this.targets[0].y,i=Math.sqrt(e*e+t*t),n=Math.acos(t/i);e>0&&(n*=-1),this.direction=n}},{key:"update",value:function(){this.reloading&&--this.rateOfFire<=0&&(this.rateOfFire=this.RATE,this.reloading=!1)}},{key:"render",value:function(e){e.save(),e.strokeStyle="violet",e.beginPath(),e.arc(this.x,this.y,this.size,0,2*Math.PI),e.closePath(),e.stroke(),e.restore(),this.selected&&(e.save(),e.strokeStyle="white",e.beginPath(),e.arc(this.x,this.y,this.range,0,2*Math.PI),e.closePath(),e.save(),e.globalAlpha=.5,e.stroke(),e.restore(),e.restore())}}]),e}();t.a=s},function(e,t,i){"use strict";function n(){}function r(e){try{return e.then}catch(e){return m=e,b}}function s(e,t){try{return e(t)}catch(e){return m=e,b}}function o(e,t,i){try{e(t,i)}catch(e){return m=e,b}}function a(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==n&&y(e,this)}function h(e,t,i){return new e.constructor(function(r,s){var o=new a(n);o.then(r,s),c(e,new d(t,i,o))})}function c(e,t){for(;3===e._83;)e=e._18;if(a._47&&a._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);u(e,t)}function u(e,t){g(function(){var i=1===e._83?t.onFulfilled:t.onRejected;if(null===i)return void(1===e._83?l(t.promise,e._18):f(t.promise,e._18));var n=s(i,e._18);n===b?f(t.promise,m):l(t.promise,n)})}function l(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var i=r(t);if(i===b)return f(e,m);if(i===e.then&&t instanceof a)return e._83=3,e._18=t,void p(e);if("function"===typeof i)return void y(i.bind(t),e)}e._83=1,e._18=t,p(e)}function f(e,t){e._83=2,e._18=t,a._71&&a._71(e,t),p(e)}function p(e){if(1===e._75&&(c(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)c(e,e._38[t]);e._38=null}}function d(e,t,i){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=i}function y(e,t){var i=!1,n=o(e,function(e){i||(i=!0,l(t,e))},function(e){i||(i=!0,f(t,e))});i||n!==b||(i=!0,f(t,m))}var g=i(6),m=null,b={};e.exports=a,a._47=null,a._71=null,a._44=n,a.prototype.then=function(e,t){if(this.constructor!==a)return h(this,e,t);var i=new a(n);return c(this,new d(e,t,i)),i}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,r,s,o,a,h,c,u,l){n(this,e),this.x=t,this.y=i,this.damage=r,this.direction=s,this.range=o,this.type=a,this.effect=h,this.mag=3,this.speed={x:0,y:0},this.size=Math.round(.005*u)}return r(e,[{key:"initSpeed",value:function(){this.speed.x=Math.sin(this.direction)*this.mag,this.speed.y=-Math.cos(this.direction)*this.mag}},{key:"update",value:function(){this.x+=this.speed.x,this.y+=this.speed.y}},{key:"render",value:function(e){e.save(),e.strokeStyle="blue",e.beginPath(),e.arc(this.x,this.y,this.size,0,2*Math.PI),e.closePath(),e.stroke(),e.restore()}}]),e}();t.a=s},function(e,t,i){i(4),e.exports=i(11)},function(e,t,i){"use strict";"undefined"===typeof Promise&&(i(5).enable(),window.Promise=i(8)),i(9),Object.assign=i(10)},function(e,t,i){"use strict";function n(){c=!1,a._47=null,a._71=null}function r(e){function t(t){(e.allRejections||o(l[t].error,e.whitelist||h))&&(l[t].displayId=u++,e.onUnhandled?(l[t].logged=!0,e.onUnhandled(l[t].displayId,l[t].error)):(l[t].logged=!0,s(l[t].displayId,l[t].error)))}function i(t){l[t].logged&&(e.onHandled?e.onHandled(l[t].displayId,l[t].error):l[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+l[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+l[t].displayId+".")))}e=e||{},c&&n(),c=!0;var r=0,u=0,l={};a._47=function(e){2===e._83&&l[e._56]&&(l[e._56].logged?i(e._56):clearTimeout(l[e._56].timeout),delete l[e._56])},a._71=function(e,i){0===e._75&&(e._56=r++,l[e._56]={displayId:null,error:i,timeout:setTimeout(t.bind(null,e._56),o(i,h)?100:2e3),logged:!1})}}function s(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function o(e,t){return t.some(function(t){return e instanceof t})}var a=i(1),h=[ReferenceError,TypeError,RangeError],c=!1;t.disable=n,t.enable=r},function(e,t,i){"use strict";(function(t){function i(e){o.length||(s(),a=!0),o[o.length]=e}function n(){for(;h<o.length;){var e=h;if(h+=1,o[e].call(),h>c){for(var t=0,i=o.length-h;t<i;t++)o[t]=o[t+h];o.length-=h,h=0}}o.length=0,h=0,a=!1}function r(e){return function(){function t(){clearTimeout(i),clearInterval(n),e()}var i=setTimeout(t,0),n=setInterval(t,50)}}e.exports=i;var s,o=[],a=!1,h=0,c=1024,u="undefined"!==typeof t?t:self,l=u.MutationObserver||u.WebKitMutationObserver;s="function"===typeof l?function(e){var t=1,i=new l(e),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}(n):r(n),i.requestFlush=s,i.makeRequestCallFromTimer=r}).call(t,i(7))},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";function n(e){var t=new r(r._44);return t._83=1,t._18=e,t}var r=i(1);e.exports=r;var s=n(!0),o=n(!1),a=n(null),h=n(void 0),c=n(0),u=n("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return a;if(void 0===e)return h;if(!0===e)return s;if(!1===e)return o;if(0===e)return c;if(""===e)return u;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new r(t.bind(e))}catch(e){return new r(function(t,i){i(e)})}return n(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,i){function n(o,a){if(a&&("object"===typeof a||"function"===typeof a)){if(a instanceof r&&a.then===r.prototype.then){for(;3===a._83;)a=a._18;return 1===a._83?n(o,a._18):(2===a._83&&i(a._18),void a.then(function(e){n(o,e)},i))}var h=a.then;if("function"===typeof h){return void new r(h.bind(a)).then(function(e){n(o,e)},i)}}t[o]=a,0===--s&&e(t)}if(0===t.length)return e([]);for(var s=t.length,o=0;o<t.length;o++)n(o,t[o])})},r.reject=function(e){return new r(function(t,i){i(e)})},r.race=function(e){return new r(function(t,i){e.forEach(function(e){r.resolve(e).then(t,i)})})},r.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!==typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function o(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function a(e){var t=new FileReader,i=o(t);return t.readAsArrayBuffer(e),i}function h(e){var t=new FileReader,i=o(t);return t.readAsText(e),i}function c(e){for(var t=new Uint8Array(e),i=new Array(t.length),n=0;n<t.length;n++)i[n]=String.fromCharCode(t[n]);return i.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&v(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return k.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var i=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(r))}}),t}function y(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var i=e.split(":"),n=i.shift().trim();if(n){var r=i.join(":").trim();t.append(n,r)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(m.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,n){e=t(e),n=i(n);var r=this.map[e];this.map[e]=r?r+","+n:n},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,n){this.map[t(e)]=i(n)},r.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),n(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),n(e)},m.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},l.call(p.prototype),l.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];g.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=p,e.Response=g,e.fetch=function(e,t){return new Promise(function(i,n){var r=new p(e,t),s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:y(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;i(new g(t,e))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&m.blob&&(s.responseType="blob"),r.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"===typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,i){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,a,h=n(e),c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var u in i)s.call(i,u)&&(h[u]=i[u]);if(r){a=r(i);for(var l=0;l<a.length;l++)o.call(i,a[l])&&(h[a[l]]=i[a[l]])}}return h}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(12),r=i(32);i.n(r);new n.a(800,800,"survival")},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=i(13),s=i(14),o=i(15),a=i(16),h=i(17),c=i(18),u=i(19),l=i(20),f=i(21),p=i(22),d=i(23),y=i(25),g=i(29),m=i(30),b=i(31),v=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Math.randomBetween=function(e,t){return Math.random()*(t-e)+e},Math.randomInt=function(e,t){var i=Math.floor(e),n=Math.ceil(t);return Math.round(Math.random()*(n-i))+i},Math.getDirection=function(e,t,i,n){var r=e-i,s=t-n,o=Math.sqrt(r*r+s*s),a=Math.acos(s/o);return r>0&&(a*=-1),a};var w=function(){function e(t,i,r){n(this,e),this.size={width:t,height:i},this.projectiles=[],this.towers=[],this.particles=[],this.mode=null,this.map=null,this.initMode(r),this.monstercontroller=new y.a("wave",this.map.path,this.size.width),this.lives=30,this.kills=0,this.money=new m.a(100),this.selected=null,this.BuildMenu=null,this.mouseMode="selecting",this.paused=!1,this.backBufferCanvas=document.getElementById("canvas"),this.backBufferCanvas.width=1.2*t,this.backBufferCanvas.height=i,this.backBufferContext=this.backBufferCanvas.getContext("2d"),this.screenBufferCanvas=document.getElementById("canvas"),this.screenBufferCanvas.width=1.2*t,this.screenBufferCanvas.height=i,document.body.appendChild(this.screenBufferCanvas),this.screenBufferContext=this.screenBufferCanvas.getContext("2d"),this.loop=this.loop.bind(this),this.render=this.render.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),window.onkeydown=this.handleKeyDown,this.handleMouseDown=this.handleMouseDown.bind(this),this.screenBufferCanvas.onmousedown=this.handleMouseDown,this.screenBufferCanvas.onmouseup=this.handleMouseUp,this.interval=setInterval(this.loop,1e3/60)}return v(e,[{key:"handleMouseDown",value:function(e){switch(e.preventDefault(),this.mouseMode){case"selecting":this.getObject(e.clientX,e.clientY);break;case"build":this.checkSpot(e.clientX,e.clientY)}}},{key:"handleKeyDown",value:function(e){switch(e.preventDefault(),console.log(e.keyCode),e.keyCode){case 66:this.mouseMode="build",this.selected&&(this.selected.object.selected=!1,this.selected=null);break;case 27:this.mouseMode="selecting",this.BuildMenu=null;break;case 32:this.paused?this.paused=!1:this.paused=!0}}},{key:"getObject",value:function(e,t){var i=this,n=!1;if(this.selected){for(var r=0;r<this.selected.upgradeButtons.length;r++)if(this.circleRectangleCollision(e,t,2,this.selected.upgradeButtons[r].x,this.selected.upgradeButtons[r].y,this.selected.upgradeButtons[r].width,this.selected.upgradeButtons[r].height)){n=!0,!this.selected.object.upgrades[r]&&this.selected.prices[r]<=this.money.money&&(this.money.money-=this.selected.prices[r],this.selected.object.value+=Math.round(.7*this.selected.prices[r]),this.selected.object.applyUpgrade(r));break}n||(this.selected.object.selected=!1,this.selected=null)}if(this.towers.forEach(function(r){i.circleCollisionDetection(e,t,2,r.x,r.y,r.size)&&(i.selected=new g.a(r,"tower",r.name),r.selected=!0,n=!0)}),!n&&(this.monstercontroller.enemies.forEach(function(r){i.circleCollisionDetection(e,t,4,r.x,r.y,r.size)&&(i.selected=new g.a(r,"monster"),r.selected=!0,n=!0)}),!n&&this.BuildMenu))for(var s=0;s<this.BuildMenu.buttons.length;s++)if(this.circleRectangleCollision(e,t,2,this.BuildMenu.buttons[s].x,this.BuildMenu.buttons[s].y,this.BuildMenu.buttons[s].width,this.BuildMenu.buttons[s].height)){n=!0,this.money.money>=this.BuildMenu.info[s].cost&&(this.money.money-=this.BuildMenu.info[s].cost,this.createTower(s));break}}},{key:"checkSpot",value:function(e,t){var i=!1;if(!(e>750||e<50)&&!(t<50||t>750)){for(var n=0;n<this.towers.length;n++)if(this.circleCollisionDetection(e,t,this.towers[n].size,this.towers[n].x,this.towers[n].y,this.towers[n].size)){i=!0;break}if(i)return void(this.mouseMode="selecting");for(var r=0;r<this.map.tiles.length;r++)if(this.circleRectangleCollision(e,t,20,this.map.tiles[r].x,this.map.tiles[r].y,50,50)){i=!0;break}if(i)return void(this.mouseMode="selecting");this.BuildMenu=new b.a(e,t),this.mouseMode="selecting"}}},{key:"handleMouseUp",value:function(e){e.preventDefault()}},{key:"checkSelected",value:function(e){this.selected.object===e&&(this.selected=null)}},{key:"initMode",value:function(e){this.map=new d.a(this.size.width,this.size.height,"random")}},{key:"circleCollisionDetection",value:function(e,t,i,n,r,s){var o=e-n,a=t-r;return!(o>i+s||a>i+s)&&!(o*o+a*a>=(i+s)*(i+s))}},{key:"circleRectangleCollision",value:function(e,t,i,n,r,s,o){var a={x:n+s/2,y:r+o/2},h=Math.abs(e-a.x),c=Math.abs(t-a.y);return!(h>s/2+i)&&(!(c>o/2+i)&&(h<=s/2||(c<=o/2||Math.pow(h-s/2,2)+Math.pow(c-o/2,2)<=i*i)))}},{key:"createTower",value:function(e){switch(e){case 0:this.towers.push(new r.a(this.BuildMenu.x,this.BuildMenu.y,this.size.width));break;case 1:this.towers.push(new o.a(this.BuildMenu.x,this.BuildMenu.y,this.size.width));break;case 2:this.towers.push(new h.a(this.BuildMenu.x,this.BuildMenu.y,this.size.width));break;case 3:this.towers.push(new c.a(this.BuildMenu.x,this.BuildMenu.y,this.size.width));break;case 4:this.towers.push(new u.a(this.BuildMenu.x,this.BuildMenu.y,this.size.width));break;case 5:this.towers.push(new l.a(this.BuildMenu.x,this.BuildMenu.y,this.size.width));break;case 6:this.towers.push(new f.a(this.BuildMenu.x,this.BuildMenu.y,this.size.width))}this.BuildMenu=null}},{key:"createProjectile",value:function(e,t,i){var n=0,r=0,o=Math.randomInt(e.minDamage,e.maxDamage+1),h=[];switch(e.upgrades.forEach(function(e){h.push(e)}),e.name){case"Plasma Turret":n=e.x+Math.sin(i)*e.size*.6,r=e.y-Math.cos(i)*e.size*.6,this.projectiles.push(new s.a(n,r,o,i,e.range,e.type,e.effect,t,this.size.width,h));break;case"Rocket Launcher":case"Industrial Gluer":n=e.x+Math.sin(i)*e.size,r=e.y-Math.cos(i)*e.size,this.projectiles.push(new a.a(n,r,o,i,e.range,e.type,e.effect,t,this.size.width,h))}}},{key:"fire",value:function(e,t,i){for(var n=0,r=0,s=0,o=0;o<e;o++)s=Math.randomBetween(i.direction-Math.PI/8,i.direction+Math.PI/8),n=i.x+Math.sin(s)*i.size,r=i.y-Math.cos(s)*i.size,this.particles.push(new p.a(n,r,s,Math.randomInt(2,3),t,50,i.range))}},{key:"rail",value:function(e,t,i){for(var n=0,r=0,s=0,o=0;o<e;o++){var a=Math.randomBetween(10,i.range);n=i.x+Math.sin(i.direction)*a,r=i.y-Math.cos(i.direction)*a,s=Math.random()>.5?i.direction+Math.PI/8:i.direction-Math.PI/8,this.particles.push(new p.a(n,r,s,1,t,30,30))}}},{key:"shoot",value:function(e,t){var i=this;e.reloading=!0;var n=0,r=0,s=Math.randomInt(e.minDamage,e.MaxDamage+1);switch(e.name){case"Plasma Turret":case"Rocket Launcher":case"Industrial Gluer":n=Math.getDirection(e.x,e.y,t.x,t.y),e.direction=n,this.createProjectile(e,t,n);break;case"Sentry Gun":case"Rail Gun":n=Math.getDirection(e.x,e.y,t.x,t.y),e.direction=n,t.hit(s,e.type,e.effect),r=Math.randomInt(4,6);for(var o=0;o<r;o++)e.upgrades[0]||e.upgrades[1]?this.rail(Math.randomInt(4,7),"violet",e):this.rail(Math.randomInt(4,7),"yellow",e);break;case"Flame Thrower":e.targets=t,e.direction=Math.getDirection(e.x,e.y,t.x,t.y),this.monstercontroller.enemies.forEach(function(t){if(i.circleCollisionDetection(e.x,e.y,e.range,t.x,t.y,t.size)){n=Math.getDirection(e.x,e.y,t.x,t.y);var r=Math.PI/8;e.direction<n+r&&e.direction>n-r&&(s=Math.randomInt(e.minDamage,e.maxDamage+1),t.hit(s,e.type,e.effect))}}),r=Math.randomInt(3,5);for(var a=0;a<r;a++)e.upgrades[3]?this.fire(Math.randomInt(3,5),"green",e):this.fire(Math.randomInt(3,5),"blue",e);break;default:console.log("Error in shoot")}}},{key:"targeting",value:function(e){var t=this;switch(e.name){case"Plasma Turret":case"Rocket Launcher":case"Rail Gun":case"Industrial Gluer":case"Flame Thrower":for(var i=0;i<this.monstercontroller.enemies.length;i++)if(this.circleCollisionDetection(e.x,e.y,e.range,this.monstercontroller.enemies[i].x,this.monstercontroller.enemies[i].y,this.monstercontroller.enemies[i].size)){this.shoot(e,this.monstercontroller.enemies[i]);break}break;case"Sentry Gun":if(e.upgrades[1]){for(var n=[],r=0;r<this.monstercontroller.enemies.length&&!(this.circleCollisionDetection(e.x,e.y,e.range,this.monstercontroller.enemies[r].x,this.monstercontroller.enemies[r].y,this.monstercontroller.enemies[r].size)&&(n.push(this.monstercontroller.enemies[r]),n.length>=3));r++);n.forEach(function(i){t.shoot(e,i)})}else for(var s=0;s<this.monstercontroller.enemies.length;s++)if(this.circleCollisionDetection(e.x,e.y,e.range,this.monstercontroller.enemies[s].x,this.monstercontroller.enemies[s].y,this.monstercontroller.enemies[s].size)){this.shoot(e,this.monstercontroller.enemies[s]);break}break;case"Tesla Tower":if(e.targets.length<=e.maxTargets)for(var o=0;o<this.monstercontroller.enemies.length;o++){var a=function(i){if(t.circleCollisionDetection(e.x,e.y,e.range,t.monstercontroller.enemies[i].x,t.monstercontroller.enemies[i].y,t.monstercontroller.enemies[i].size)){var n=!1;if(e.targets.forEach(function(e){e.target===t.monstercontroller.enemies[i]&&(n=!0)}),n||e.targetAdded(t.monstercontroller.enemies[i]),e.targets.length>=e.maxTargets)return"break"}}(o);if("break"===a)break}}}},{key:"resolveProjectileCollision",value:function(e,t){if(e instanceof a.a){e.explode();for(var i=0;i<this.monstercontroller.enemies.length;i++)this.circleCollisionDetection(this.monstercontroller.enemies[i].x,this.monstercontroller.enemies[i].y,this.monstercontroller.enemies[i].size,e.x,e.y,e.size)&&this.monstercontroller.enemies[i].hit(e.damage,e.type,e.effect)}else e instanceof s.a&&t.hit(e.damage,e.type,e.effect)}},{key:"removeMonster",value:function(e){this.selected&&this.checkSelected(this.monstercontroller.enemies[e]),this.monstercontroller.enemies.splice(e,1)}},{key:"removeTower",value:function(e){this.selected&&this.checkSelected(this.towers[e]),this.towers.splice(e,1)}},{key:"update",value:function(){var e=this;this.money.update(),this.monstercontroller.update();for(var t=0;t<this.monstercontroller.enemies.length;t++){var i=this.monstercontroller.enemies[t].update();"end"===i?(this.lives--,this.removeMonster(t)):"killed"===i&&(this.money.money+=this.monstercontroller.enemies[t].bounty,this.removeMonster(t),this.kills++)}this.towers.forEach(function(t){t.reloading||e.targeting(t)});for(var n=0;n<this.monstercontroller.enemies.length;n++)for(var r=0;r<this.projectiles.length;r++)if(this.circleCollisionDetection(this.monstercontroller.enemies[n].x,this.monstercontroller.enemies[n].y,this.monstercontroller.enemies[n].size,this.projectiles[r].x,this.projectiles[r].y,this.projectiles[r].size)){this.resolveProjectileCollision(this.projectiles[r],this.monstercontroller.enemies[n]),this.projectiles.splice(r,1);break}for(var s=0;s<this.projectiles.length;s++)this.projectiles[s].update()&&this.projectiles.splice(s,1);for(var o=0;o<this.particles.length;o++)this.particles[o].update(),this.particles[o].life<=0&&this.particles.splice(o,1);this.towers.forEach(function(e){e.update()}),this.selected&&this.selected.update(),this.BuildMenu&&this.BuildMenu.update()}},{key:"stats",value:function(){this.backBufferContext.save(),this.backBufferContext.fillStyle="red",this.backBufferContext.font="bolder 20px Arial",this.backBufferContext.fillText("Money: $"+this.money.money,500,20),this.backBufferContext.fillText("Lives: "+this.lives,675,20),this.backBufferContext.fillText("Kills: "+this.kills,775,20),this.backBufferContext.fillText("Wave: "+this.monstercontroller.wave,875,20),this.backBufferContext.restore()}},{key:"render",value:function(){var e=this;this.backBufferContext.fillstyle="black",this.backBufferContext.fillRect(0,0,1.2*this.size.width,this.size.height),this.map.render(this.backBufferContext),this.towers.forEach(function(t){t.render(e.backBufferContext)}),this.projectiles.forEach(function(t){t.render(e.backBufferContext)}),this.particles.forEach(function(t){t.render(e.backBufferContext)}),this.monstercontroller.render(this.backBufferContext),this.selected&&this.selected.render(this.backBufferContext),this.BuildMenu&&this.BuildMenu.render(this.backBufferContext),this.stats(),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)}},{key:"loop",value:function(){this.paused||(this.update(),this.render())}}]),e}();t.a=w},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(0),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=function(e){function t(e,i,s){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s));return o.range=150,o.direction=0,o.RATE=30,o.rateOfFire=o.RATE,o.reloading=!1,o.targets=[],o.name="Plasma Turret",o.type="energy",o.minDamage=15,o.maxDamage=20,o.value=17,o.image=new Image,o.image.onload=function(){o.size=o.size*o.image.width/o.image.height},o.image.src="Sprites/PlasmaGun_IDLE_00.png",o}return s(t,e),a(t,[{key:"applyUpgrade",value:function(e){switch(e){case 0:this.decreaseRate();break;case 1:this.increaseDamage();break;case 2:this.increaseRange();break;case 3:this.decreaseRate();break;default:return void console.log("Invalid Upgrade")}this.upgrades[e]=!0}},{key:"decreaseRate",value:function(){this.RATE=Math.round(.7*this.RATE)}},{key:"increaseRange",value:function(){this.range=Math.round(1.25*this.range)}},{key:"increaseDamage",value:function(){this.minDamage=Math.round(1.25*this.minDamage),this.maxDamage=Math.round(1.25*this.maxDamage),this.image.src="Sprites/PlasmaGun_IDLE_01.png"}},{key:"update",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"render",value:function(e){e.save(),e.translate(this.x,this.y),e.rotate(this.direction-Math.PI/2),e.drawImage(this.image,-this.size,-this.size,this.image.width,this.image.height),e.restore(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}}]),t}(o.a);t.a=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(2),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=function(e){function t(e,i,s,o,a,c,u,l,f,p){n(this,t);var d=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s,o,a,c,u,l,f,p));return d.mag=5,d.startPosition={x:e,y:i},d.target=l,d.type="energy",h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initSpeed",d).call(d),d}return s(t,e),a(t,[{key:"seek",value:function(){var e=this.x-this.target.x,t=this.y-this.target.y,i=Math.sqrt(e*e+t*t),n=Math.acos(t/i);e>0&&(n*=-1),this.direction=n,this.speed.x=Math.sin(this.direction)*this.mag,this.speed.y=-Math.cos(this.direction)*this.mag}},{key:"update",value:function(){this.seek(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);var e=this.x-this.startPosition.x,i=this.y-this.startPosition.y,n=e*e+i*i;return Math.abs(this.x-this.target.x)<.8*this.target.size&&Math.abs(this.y-this.target.y)<.8*this.target.size||Math.sqrt(n)>=1.25*this.range}},{key:"render",value:function(e){e.strokeStyle="blue",h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}}]),t}(o.a);t.a=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(0),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=function(e){function t(e,i,s){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s));return o.range=200,o.direction=0,o.RATE=90,o.rateOfFire=o.RATE,o.reloading=!1,o.targets=[],o.name="Rocket Launcher",o.type="kinetic",o.minDamage=20,o.maxDamage=35,o.value=21,o.image=new Image,o.image.onload=function(){o.size=o.size*o.image.width/o.image.height},o.image.src="Sprites/RocketLauncher_IDLE_00.png",o}return s(t,e),a(t,[{key:"applyUpgrade",value:function(e){switch(e){case 0:this.increaseRange();break;case 1:this.image.src="Sprites/RocketLauncher_IDLE_01.png";break;case 2:this.increaseDamage();break;case 3:this.changeType();break;default:return void console.log("Invalid Upgrade")}this.upgrades[e]=!0}},{key:"increaseRange",value:function(){this.range=Math.round(1.4*this.range)}},{key:"increaseDamage",value:function(){this.minDamage=Math.round(1.5*this.minDamage),this.maxDamage=Math.round(1.5*this.maxDamage)}},{key:"changeType",value:function(){this.type="energy"}},{key:"update",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"render",value:function(e){e.save(),e.translate(this.x,this.y),e.rotate(this.direction-Math.PI/2),e.drawImage(this.image,-this.size,-this.size,this.image.width,this.image.height),e.restore(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}}]),t}(o.a);t.a=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(2),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=function(e){function t(e,i,s,o,a,c,u,l,f,p){n(this,t);var d=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s,o,a,c,u,l,f,p));return d.mag=3,d.startPosition={x:e,y:i},d.target=l,d.type="kinetic",d.life=0,d.explosion=3,d.size=Math.round(.01*f),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initSpeed",d).call(d),d.applyUpgrades(p),d}return s(t,e),a(t,[{key:"applyUpgrades",value:function(e){e[1]&&(this.explosion*=2)}},{key:"explode",value:function(){this.size*=this.explosion,this.mag=0,this.life=1}},{key:"changeType",value:function(){this.type="energy"}},{key:"seek",value:function(){var e=this.x-this.target.x,t=this.y-this.target.y,i=Math.sqrt(e*e+t*t),n=Math.acos(t/i);e>0&&(n*=-1),this.direction=n,this.speed.x=Math.sin(this.direction)*this.mag,this.speed.y=-Math.cos(this.direction)*this.mag}},{key:"update",value:function(){if(1===this.life)return!0;this.seek(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);var e=this.x-this.startPosition.x,i=this.y-this.startPosition.y,n=e*e+i*i;return Math.abs(this.x-this.target.x)<.8*this.target.size&&Math.abs(this.y-this.target.y)<.8*this.target.size||Math.sqrt(n)>=1.25*this.range}},{key:"render",value:function(e){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}}]),t}(o.a);t.a=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(0),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=function(e){function t(e,i,s){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s));return o.range=150,o.direction=0,o.RATE=45,o.rateOfFire=o.RATE,o.reloading=!1,o.targets=[],o.name="Sentry Gun",o.type="kinetic",o.minDamage=18,o.maxDamage=22,o.value=18,o.image=new Image,o.image.onload=function(){o.size=o.size*o.image.width/o.image.height},o.image.src="Sprites/SentryGun_IDLE_00.png",o}return s(t,e),a(t,[{key:"applyUpgrade",value:function(e){switch(e){case 0:this.increaseDamage();break;case 1:break;case 2:this.increaseRange();break;case 3:this.decreaseRate();break;default:return void console.log("Invalid Upgrade")}this.upgrades[e]=!0}},{key:"increaseDamage",value:function(){this.minDamage=Math.round(1.15*this.minDamage),this.maxDamage=Math.round(1.25*this.maxDamage),this.image.src="Sprites/SentryGun_IDLE_01.png"}},{key:"increaseRange",value:function(){this.range=Math.round(1.25*this.range)}},{key:"decreaseRate",value:function(){this.RATE=Math.round(.7*this.RATE)}},{key:"update",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"render",value:function(e){e.save(),e.translate(this.x,this.y),e.rotate(this.direction-Math.PI/2),e.drawImage(this.image,-this.size,-this.size,this.image.width,this.image.height),e.restore(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}}]),t}(o.a);t.a=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(0),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=function(e){function t(e,i,s){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s));return o.range=300,o.direction=0,o.RATE=120,o.rateOfFire=o.RATE,o.reloading=!1,o.targets=[],o.name="Rail Gun",o.type="kinetic",o.minDamage=40,o.maxDamage=50,o.value=42,o.image=new Image,o.image.onload=function(){o.size=o.size*o.image.width/o.image.height},o.image.src="Sprites/RailGun_IDLE_00.png",o}return s(t,e),a(t,[{key:"applyUpgrade",value:function(e){switch(e){case 0:case 1:this.increaseDamage();break;case 2:this.increaseRange();break;case 3:this.decreaseRate();break;default:return void console.log("Invalid Upgrade")}this.upgrades[e]=!0}},{key:"increaseDamage",value:function(){this.minDamage=Math.round(1.5*this.minDamage),this.maxDamage=Math.round(1.5*this.maxDamage),this.image.src="Sprites/RailGun_IDLE_01.png"}},{key:"increaseRange",value:function(){this.range=Math.round(1.5*this.range)}},{key:"decreaseRate",value:function(){this.RATE=Math.round(.8*this.RATE)}},{key:"update",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"render",value:function(e){e.save(),e.translate(this.x,this.y),e.rotate(this.direction-Math.PI/2),e.drawImage(this.image,-this.size,-this.size,this.image.width,this.image.height),e.restore(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}}]),t}(o.a);t.a=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(0),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=function(e){function t(e,i,s){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s));return o.range=100,o.direction=0,o.RATE=1,o.rateOfFire=o.RATE,o.reloading=!1,o.targets=[],o.maxTargets=3,o.TICK=15,o.name="Tesla Tower",o.type="energy",o.minDamage=8,o.maxDamage=12,o.value=21,o.image=new Image,o.image.onload=function(){o.size=o.size*o.image.width/o.image.height},o.image.src="Sprites/TeslaTower_IDLE_00.png",o}return s(t,e),a(t,[{key:"applyUpgrade",value:function(e){switch(e){case 0:this.increaseDamage();break;case 1:this.moreTargets();break;case 2:this.increaseRange();break;case 3:this.deathTower();break;default:return void console.log("Invalid Upgrade")}this.upgrades[e]=!0}},{key:"increaseDamage",value:function(){this.minDamage+=3,this.maxDamage+=4}},{key:"moreTargets",value:function(){this.maxTargets+=1}},{key:"increaseRange",value:function(){this.range=Math.round(1.15*this.range)}},{key:"deathTower",value:function(){this.increaseDamage(),this.moreTargets(),this.increaseRange(),this.image.src="Sprites/TeslaTower_IDLE_01.png"}},{key:"targetAdded",value:function(e){this.targets.push({target:e,timer:this.TICK})}},{key:"targetRemoved",value:function(e){this.targets.splice(e,1)}},{key:"update",value:function(){for(var e=0;e<this.targets.length;e++)if(--this.targets[e].timer<=0){var i=Math.randomInt(this.minDamage,this.maxDamage+1);this.targets[e].target.hit(i,this.type,this.effect),this.targets[e].timer=this.TICK,this.targets[e].target.health<0&&this.targets.splice(e,1)}for(var n=0;n<this.targets.length;n++)this.targets[n].target.dead?this.targets.splice(n,1):(Math.abs(this.targets[n].target.x-this.x)>this.range||Math.abs(this.targets[n].target.y-this.y)>this.range)&&this.targets.splice(n,1);h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"render",value:function(e){var i=this;e.save(),e.strokeStyle="cyan",e.beginPath(),this.targets.forEach(function(t){e.moveTo(i.x,i.y),e.lineTo(t.target.x,t.target.y)}),e.stroke(),e.translate(this.x,this.y),e.rotate(this.direction-Math.PI/2),e.drawImage(this.image,-this.size,-this.size,this.image.width,this.image.height),e.restore(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}}]),t}(o.a);t.a=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(0),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=function(e){function t(e,i,s){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s));return o.range=100,o.direction=0,o.RATE=45,o.rateOfFire=o.RATE,o.reloading=!1,o.targets=[],o.name="Industrial Gluer",o.type="kinetic",o.effect=[],o.effect.push("slow"),o.minDamage=8,o.maxDamage=10,o.value=25,o.image=new Image,o.image.onload=function(){o.size=o.size*o.image.width/o.image.height},o.image.src="Sprites/GlueMachine_IDLE_00.png",o}return s(t,e),a(t,[{key:"applyUpgrade",value:function(e){switch(e){case 0:this.decreaseRate();break;case 1:break;case 2:this.increaseRange();break;case 3:this.acidGlue();break;default:return void console.log("Invalid Upgrade")}this.upgrades[e]=!0}},{key:"decreaseRate",value:function(){this.RATE=Math.round(.7*this.RATE)}},{key:"increaseRange",value:function(){this.range=Math.round(1.25*this.range)}},{key:"acidGlue",value:function(){this.effect.push("acid"),this.image.src="Sprites/GlueMachine_IDLE_01.png"}},{key:"update",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"render",value:function(e){e.save(),e.translate(this.x,this.y),e.rotate(this.direction-Math.PI/2),e.drawImage(this.image,-this.size,-this.size,this.image.width,this.image.height),e.restore(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}}]),t}(o.a);t.a=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=i(0),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=function(e){function t(e,i,s){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s));return o.range=150,o.direction=0,o.RATE=10,o.rateOfFire=o.RATE,o.reloading=!1,o.targets=null,o.name="Flame Thrower",o.type="energy",o.effect=[],o.effect.push("burn"),o.minDamage=1,o.maxDamage=2,o.value=25,o.image=new Image,o.image.onload=function(){o.size=o.size*o.image.width/o.image.height},o.image.src="Sprites/FlameThrower_IDLE_00.png",o}return s(t,e),a(t,[{key:"applyUpgrade",value:function(e){switch(e){case 0:this.increaseDamage();break;case 1:this.pyroManiac();break;case 2:this.increaseRange();break;case 3:this.acidFire();break;default:return void console.log("Invalid Upgrade")}this.upgrades[e]=!0}},{key:"increaseDamage",value:function(){this.minDamage+=1,this.maxDamage+=1}},{key:"increaseRange",value:function(){this.range=Math.round(1.1*this.range)}},{key:"acidFire",value:function(){this.effect.push("acid"),this.image.src="Sprites/FlameThrower_IDLE_01.png"}},{key:"pyroManiac",value:function(){this.increaseDamage(),this.increaseRange()}},{key:"update",value:function(){this.targets&&(this.direction=Math.getDirection(this.x,this.y,this.targets.x,this.targets.y),this.targets.dead?this.targets=null:(Math.abs(this.targets.x-this.x)>this.range||Math.abs(this.targets.y-this.y)>this.range)&&(this.targets=null)),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"render",value:function(e){e.save(),e.translate(this.x,this.y),e.rotate(this.direction-Math.PI/2),e.drawImage(this.image,-this.size,-this.size,this.image.width,this.image.height),e.restore(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}}]),t}(o.a);t.a=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,r,s,o,a,h){n(this,e),this.startX=t,this.startY=i,this.x=t,this.y=i,this.life=a,this.color=o,this.speed=s,this.speedX=Math.sin(r)*this.speed,this.speedY=-Math.cos(r)*this.speed,this.decayDistance=Math.randomBetween(.8*h,h),this.size=4}return r(e,[{key:"update",value:function(){var e=this.startX-this.x,t=this.startY-this.y;this.life--,this.decayDistance*this.decayDistance<=e*e+t*t||(this.x+=this.speedX,this.y+=this.speedY)}},{key:"render",value:function(e){e.save(),e.fillStyle=this.color,e.fillRect(this.x-this.size/2,this.y-this.size/2,this.size,this.size),e.restore()}}]),e}();t.a=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=i(24),s=i.n(r),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,i,r){n(this,e),this.path=[],this.seed=r,this.width=t,this.height=i,this.getTrack(),this.tiles=[],this.setTiles(),this.factory=new Image,this.factory.src="Sprites/RobotFactory.png",this.generator=new Image,this.generator.src="Sprites/Generator.png",this.general=new Image,this.general.src="Sprites/Path.png"}return o(e,[{key:"getTrack",value:function(){for(var e=0;e<s.a.map1.path.length;e++)this.path.push({x:s.a.map1.path[e].x+s.a.tileWidth/2,y:s.a.map1.path[e].y+s.a.tileHeight/2})}},{key:"setTiles",value:function(){for(var e=0;e<s.a.map1.tiles.length;e++)0!==s.a.map1.tiles[e]&&this.tiles.push({x:e%16*s.a.tileWidth,y:Math.floor(e/16)*s.a.tileHeight,tile:s.a.map1.tiles[e]})}},{key:"generateTrack",value:function(){var e=Math.randomInt(5,10),t=null,i=0,n=0,r=0;for(Math.random()>.5?(r=Math.random()>.5?-10:this.height+10,n=Math.randomInt(10,this.width-10)):(n=Math.random()>.5?-10:this.width+10,r=Math.randomInt(10,this.height-10)),this.path.push({x:n,y:r});this.path.length<e;){i=Math.randomInt(0,3);var s=0,o=0,a=0;switch(i){case 0:a=1,s=Math.randomInt(100,n-200),o=r;break;case 1:a=0,s=Math.randomInt(n+200,this.width-100),o=r;break;case 2:a=3,o=Math.randomInt(100,r-200),s=n;break;case 3:a=2,s=Math.randomInt(r+200,this.height-100),o=r;break;default:console.log("ERROR IN TRACK GENERATION")}i!==t&&(s>0&&s<this.width&&o>0&&o<this.height&&(n=s,r=o,t=a,this.path.push({x:n,y:r})))}console.log(this.path)}},{key:"update",value:function(){}},{key:"render",value:function(e){e.save();for(var t=0;t<this.tiles.length;t++)switch(this.tiles[t].tile){case 1:case 2:case 3:case 4:case 5:case 6:e.drawImage(this.general,this.tiles[t].x,this.tiles[t].y,s.a.tileWidth,s.a.tileHeight);break;case 8:e.drawImage(this.factory,this.tiles[t].x,this.tiles[t].y,s.a.tileWidth,s.a.tileHeight);break;case 9:e.drawImage(this.generator,this.tiles[t].x,this.tiles[t].y,s.a.tileWidth,s.a.tileHeight);break;default:console.log("Error in Tile Rendering")}e.beginPath(),e.moveTo(800,0),e.lineTo(800,800),e.stroke(),e.restore()}}]),e}();t.a=a},function(e,t){e.exports={tileWidth:"50",tileHeight:"50",map1:{path:[{x:0,y:100},{x:150,y:100},{x:150,y:400},{x:600,y:400},{x:600,y:100},{x:300,y:100},{x:300,y:650},{x:700,y:650}],tiles:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,1,1,2,0,0,2,1,1,1,1,1,5,0,0,0,0,0,0,6,0,0,6,0,0,0,0,0,6,0,0,0,0,0,0,6,0,0,6,0,0,0,0,0,6,0,0,0,0,0,0,6,0,0,6,0,0,0,0,0,6,0,0,0,0,0,0,6,0,0,6,0,0,0,0,0,6,0,0,0,0,0,0,6,0,0,6,0,0,0,0,0,6,0,0,0,0,0,0,3,1,1,6,1,1,1,1,1,4,0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,1,1,1,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=i(26),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i,r){n(this,e),this.enemies=[],this.generated=[],this.index=0,this.track=i,this.wave=1,this.INBETWEEN=600,this.inbetweenTimer=0,this.SPAWN=30,this.spawnTimer=this.SPAWN,this.size=r,this.randomWave()}return s(e,[{key:"randomWave",value:function(){for(var e=Math.randomInt(8+2*this.wave,12+2*this.wave),t=0;t<e;t++){var i=[],n=Math.random();n>.95-2*this.wave/100?i=this.randomSpecials(3):n>.8-2*this.wave/100?i=this.randomSpecials(2):n>.6-2*this.wave/100&&(i=this.randomSpecials(1)),this.generated.push({x:this.track[0].x,y:this.track[0].y,speed:.75,health:Math.round(1.5*(25+this.wave)),armor:Math.round(1.1*(1+this.wave)),properties:i,path:this.track,shield:Math.round(1.5*(10+this.wave)),color:"red"})}}},{key:"randomSpecials",value:function(e){for(var t=[];t.length<e;){var i=Math.randomInt(0,3),n=!1,r=null;switch(i){case 0:r="Titanium Alloys";break;case 1:r="Nano-Bots";break;case 2:r="Over-Clocked";break;case 3:r="Enhanced Power";break;default:console.log("Some how in default")}for(var s=0;s<t.length;s++)if(r===t[s]){n=!0;break}n||t.push(r)}return t}},{key:"update",value:function(){this.generated.length>0&&this.inbetweenTimer<=0&&--this.spawnTimer<=0&&this.enemies.length<this.generated.length&&(this.enemies.push(new r.a(this.generated[this.index].x,this.generated[this.index].y,this.generated[this.index].speed,this.generated[this.index].health,this.generated[this.index].armor,this.generated[this.index].properties,this.generated[this.index].shield,this.generated[this.index].path,this.size,this.generated[this.index].color)),this.index++,this.spawnTimer=this.SPAWN,this.index>=this.generated.length&&(this.generated=[])),0===this.generated.length&&0===this.enemies.length&&(this.wave++,this.randomWave(),this.inbetweenTimer=this.INBETWEEN,this.spawnTimer=this.SPAWN,this.index=0),0!==this.inbetweenTimer&&this.inbetweenTimer--}},{key:"render",value:function(e){this.enemies.forEach(function(t){t.render(e)})}}]),e}();t.a=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=i(27),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i,s,o,a,h,c,u,l,f){n(this,e),this.x=t,this.y=i,this.track=u,this.checkpoint=1,this.direction=Math.getDirection(this.x,this.y,this.track[1].x,this.track[1].y),this.speed=s,this.speedModifer=1,this.velocity={x:Math.sin(this.direction)*this.speed,y:-Math.cos(this.direction)*this.speed},this.MAXHP=o,this.health=this.MAXHP,this.regeneration=Math.round(.01*this.MAXHP),this.REGEN=60,this.regenTimer=this.REGEN,this.armor=a,this.MAXSHIELD=c,this.shield=this.MAXSHIELD,this.RECHARGE=60,this.rechargeRate=this.RECHARGE,this.specials=h,this.applySpecials(),this.statusEffects=[],this.bounty=Math.round(.1*this.MAXHP*(this.specials.length+1)),this.name="Robot",this.color=f,this.size=Math.round(.01*l),this.selected=!1,this.dead=!1,this.sprite=new r.a("Test",this.direction)}return s(e,[{key:"calculateMove",value:function(){this.velocity.x=Math.sin(this.direction)*this.speed*this.speedModifer,this.velocity.y=-Math.cos(this.direction)*this.speed*this.speedModifer}},{key:"applySpecials",value:function(){var e=this;this.specials.forEach(function(t){switch(t){case"Titanium Alloys":e.armor*=2;break;case"Over-Clocked":e.speed*=1.5;break;case"Nano-Bots":e.regeneration=Math.round(.06*e.MAXHP),e.REGEN=Math.round(e.REGEN/1.75),e.regenTimer=e.REGEN;break;case"Enhanced Power":e.MAXSHIELD*=2,e.shield=e.MAXSHIELD,e.RECHARGE/=2,e.rechargeRate=e.RECHARGE}})}},{key:"addStatusEffects",value:function(e){var t=this;e.forEach(function(e){for(var i=!1,n=0;n<t.statusEffects.length;n++)if(e===t.statusEffects[n].name){"acid"===e&&"burn"===e||(t.statusEffects[n].timer=60),i=!0;break}i||("acid"===e?t.statusEffects.push({name:e,timer:10}):t.statusEffects.push({name:e,timer:120}))})}},{key:"applyStatusEffects",value:function(){for(var e=0;e<this.statusEffects.length;e++)switch(this.statusEffects[e].name){case"slow":this.speedModifer=.5,this.statusEffects[e].timer--,this.statusEffects[e].timer<=0&&(this.speedModifer=1,this.statusEffects.splice(e,1)),this.calculateMove();break;case"burn":if(this.statusEffects[e].timer%10===0){var t=6-2*this.armor;t>0&&(this.health-=t)}this.statusEffects[e].timer--;break;case"acid":this.statusEffects[e].timer%5===0&&--this.armor<0&&(this.armor=0),this.statusEffects[e].timer--}}},{key:"checkpointCheck",value:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i<=.5*this.size*(.5*this.size)}},{key:"hit",value:function(e,t,i){var n=0;this.shield>0?"energy"===t?(this.shield-=Math.round(1.25*e),this.shield<0&&(n=Math.round(.75*this.shield+2*this.armor),n<0&&(this.health+=n),this.shield=0)):"kinetic"===t&&(this.shield-=Math.round(.75*e),this.shield<0&&(n=Math.round(1.25*this.shield+2*this.armor),n<0&&(this.health+=n),this.shield=0)):(i&&this.addStatusEffects(i),"energy"===t?(n=Math.round(.75*e-2*this.armor))>0&&(this.health-=n):"kinetic"===t&&(n=Math.round(1.25*e-2*this.armor))>0&&(this.health-=n))}},{key:"update",value:function(){if(this.sprite.update(),this.statusEffects.length>0&&this.applyStatusEffects(),this.x+=this.velocity.x,this.y+=this.velocity.y,this.checkpointCheck(this.track[this.checkpoint])){if(!(++this.checkpoint<this.track.length))return this.dead=!0,"end";this.direction=Math.getDirection(this.x,this.y,this.track[this.checkpoint].x,this.track[this.checkpoint].y),this.calculateMove(this.speedModifer)}if(this.health<=0)return this.dead=!0,"killed";this.regenTimer--,this.regenTimer<=0&&(this.health+=this.regeneration,this.health>this.MAXHP&&(this.health=this.MAXHP),this.regenTimer=this.REGEN),this.shield>0&&--this.rechargeRate<=0&&(this.shield+=Math.round(.05*this.MAXSHIELD),this.shield>this.MAXSHIELD&&(this.shield=this.MAXSHIELD),this.rechargeRate=this.RECHARGE)}},{key:"render",value:function(e){this.sprite.render(e,this.x,this.y)}}]),e}();t.a=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=i(28),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i){n(this,e),this.animations={walk:new r.a("Sprites/"+t,"_WALK",i,!0),flicker:new r.a("Sprites/"+t,"FLICKER",i,!0)},this.state="walk"}return s(e,[{key:"setState",value:function(e){this.state=e,this.animations[e].reset()}},{key:"update",value:function(){this.animations[this.state].advance()}},{key:"render",value:function(e,t,i){this.animations[this.state].render(e,t,i)}}]),e}();t.a=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,r,s){var o=this;n(this,e),this.images=[];for(var a=0;a<3;a++)!function(e){var n=new Image;o.height=50,n.onload=function(){o.width=o.height*n.width/n.height},n.src=t+i+"_0"+e+".png",o.images.push(n)}(a);this.frame=0,this.rate=3,this.counter=0,this.looping=s,this.direction=0,this.facing="right"}return r(e,[{key:"advance",value:function(){this.direction+=.01,this.direction>=2*Math.PI&&(this.direction=0),this.counter>this.rate&&(this.frame++,this.frame>=this.images.length&&(this.looping?this.frame=0:this.frame=this.images.length-1),this.counter=0),this.counter++}},{key:"reset",value:function(){this.counter=0,this.frame=0}},{key:"render",value:function(e,t,i){this.images[this.frame]&&(e.save(),e.translate(t,i),e.drawImage(this.images[this.frame],-this.width/2,-this.height/2,this.width,this.height),e.restore())}}]),e}();t.a=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,r){n(this,e),this.width=130,this.height=150,this.object=t,this.type=i,this.name=r,this.description="",this.options=[],this.prices=[],this.upgradeButtons=[],"tower"===this.type&&(this.upgrades=this.object.upgrades,this.initButtons()),t.y>500?this.y=t.y-this.height:this.y=t.y,this.x=t.x+30,this.button=new Image,this.button.onload=function(){},this.button.src="Sprites/Button.png",this.button2=new Image,this.button2.onload=function(){},this.button2.src="Sprites/ButtonGreen.png",this.image=new Image,this.image.onload=function(){},this.image.src="Sprites/ToolTip.png"}return r(e,[{key:"initButtons",value:function(){for(var e=450,t=0;t<this.upgrades.length;t++)this.upgradeButtons.push({x:810,y:e,width:140,height:75}),e+=75}},{key:"update",value:function(){this.object.y>500?this.y=this.object.y-this.height:this.y=this.object.y,this.x=this.object.x+30}},{key:"determineDisplay",value:function(e){switch(this.type){case"tower":this.displayTowerInfo(e);break;case"monster":this.displayMonsterInfo(e)}}},{key:"displayTowerInfo",value:function(e){e.save(),e.fillStyle="black",e.font="bolder 14px Arial";var t=this.x+10,i=20;this.y>500&&(i*=-1),e.fillText(this.object.name,t,this.y+i),e.fillText("Min D: "+this.object.minDamage,t,this.y+2*i),e.fillText("Max D: "+this.object.maxDamage,t,this.y+3*i),e.fillText("Rate: "+ +(60/this.object.RATE).toFixed(2),t,this.y+4*i),e.fillText("Value: "+this.object.value,t,this.y+5*i),e.restore(),this.displayUpgrades(e)}},{key:"determineUpgrades",value:function(){switch(this.name){case"Plasma Turret":this.options=["Cooling System","Hotter Plasma","Improved Range","Nitrogen Cooling"],this.prices=[20,25,30,25];break;case"Rocket Launcher":this.options=["Range Finder","Huge Explosives","Volatile","Plasma Grenades"],this.prices=[30,35,40,20];break;case"Sentry Gun":this.options=["Dense Rounds","Multi-Targeting","Improved Range","Optimized"],this.prices=[20,35,40,30];break;case"Rail Gun":this.options=["Dense Slugs","Hyper-Sonic","Improved Range","Cooling System"],this.prices=[40,40,30,30];break;case"Tesla Tower":this.options=["High Voltage","More Targets","Improved Range","Death Tower"],this.prices=[20,30,25,50];break;case"Industrial Gluer":this.options=["Faster Production","Bigger Globs","Improved Range","Acid Glue"],this.prices=[30,40,30,40];break;case"Flame Thrower":this.options=["Insane Heat","Pyro-Maniac","Improved Range","Acid Fire"],this.prices=[30,50,30,40];break;default:console.log("Invalid Name")}}},{key:"displayUpgrades",value:function(e){this.determineUpgrades(),e.save(),e.font="bolder 14px arial";for(var t=0;t<this.upgrades.length;t++)this.upgrades[t]?e.drawImage(this.button2,this.upgradeButtons[t].x,this.upgradeButtons[t].y,this.upgradeButtons[t].width,this.upgradeButtons[t].height):e.drawImage(this.button,this.upgradeButtons[t].x,this.upgradeButtons[t].y,this.upgradeButtons[t].width,this.upgradeButtons[t].height),e.fillStyle="black",e.fillText(this.options[t],this.upgradeButtons[t].x+5,Math.round(this.upgradeButtons[t].y+this.upgradeButtons[t].height/2)-10),e.fillText("$"+this.prices[t],this.upgradeButtons[t].x+5,Math.round(this.upgradeButtons[t].y+this.upgradeButtons[t].height/2)+10);e.restore()}},{key:"displayMonsterInfo",value:function(e){this.object.specials.length>1&&(this.height=200),e.save(),e.fillStyle="black",e.font="bolder 14px Arial";var t=this.x+10,i=20;this.y>500&&(i*=-1),e.fillText(this.object.name,t,this.y+i),e.fillText("Health: "+this.object.health,t,this.y+2*i),e.fillText("Shield: "+this.object.shield,t,this.y+3*i),e.fillText("Armor: "+this.object.armor,t,this.y+4*i),e.fillText("Speed: "+this.object.speed,t,this.y+5*i),e.fillText("Bounty: "+this.object.bounty,t,this.y+6*i);for(var n=0;n<this.object.specials.length;n++)e.fillText(this.object.specials[n],t,this.y+i*(n+7));e.restore()}},{key:"render",value:function(e){e.save(),e.save(),e.globalAlpha=.4,e.drawImage(this.image,this.x,this.y,this.width,this.height),e.restore(),e.restore(),this.determineDisplay(e)}}]),e}();t.a=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t){n(this,e),this.money=t,this.interestRate=1.1,this.interest=0,this.income=3,this.timer=180}return r(e,[{key:"calculateInterest",value:function(){this.interest=Math.round(this.money*this.interestRate),this.money+=this.interest}},{key:"changeIncome",value:function(e){this.income+=e}},{key:"changeInterest",value:function(e){"up"===e?this.interest+=.05:this.interest-=.05}},{key:"update",value:function(){0===--this.timer&&(this.money+=this.income,this.timer=180)}}]),e}();t.a=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i){n(this,e),this.x=t,this.y=i,this.radius=20,this.buttons=[],this.initButtons(),this.button=new Image,this.button.src="Sprites/Button.png",this.info=[{name:"Plasma Turret",description:"Rapid Fire Energy Tower",cost:25},{name:"Rocket Launcher",description:"Fires AOE Explosives",cost:30},{name:"Sentry Gun",description:"Rapid Fire Physical Tower",cost:25},{name:"Rail Gun",description:"Slow Firing Physical Tower",cost:60},{name:"Tesla",description:"MultiTargeting Energy Tower",cost:30},{name:"Industrial Gluer",description:"Mass Slowing Tower",cost:35},{name:"Flame Thrower",description:"Cone Energy Tower",cost:35}]}return r(e,[{key:"initButtons",value:function(){for(var e=50,t=0;t<7;t++)this.buttons.push({x:810,y:e,width:140,height:55}),e+=55}},{key:"displayStore",value:function(e){e.save(),e.font="bolder 16px arial";for(var t=0;t<this.buttons.length;t++)e.drawImage(this.button,this.buttons[t].x,this.buttons[t].y,this.buttons[t].width,this.buttons[t].height),e.fillStyle="black",e.fillText(this.info[t].name,this.buttons[t].x+5,Math.round(this.buttons[t].y+this.buttons[t].height/2)-10),e.fillText("$"+this.info[t].cost,this.buttons[t].x+5,Math.round(this.buttons[t].y+this.buttons[t].height/2)+10);e.restore()}},{key:"update",value:function(){}},{key:"render",value:function(e){this.displayStore(e),e.save(),e.strokeStyle="white",e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.closePath(),e.stroke(),e.restore()}}]),e}();t.a=s},function(e,t){}]);
//# sourceMappingURL=main.843bbf7a.js.map